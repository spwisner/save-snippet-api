# Save Snippet API

Save Snippet is a tool used by developers to store code for future reference.  The goal of this project was to created a fully functioning **"MERN"** (MongoDB, Express, React, NodeJS) web application.

Link to the live application: [https://spwisner.github.io/save-snippet](https://spwisner.github.io/save-snippet).

Link to the API Source: [https://github.com/spwisner/save-snippet-api](https://github.com/spwisner/save-snippet-api).

Application Screenshot:
![Application Screenshot](https://user-images.githubusercontent.com/13546265/28041611-1d2afc2a-6598-11e7-806f-8c24b1b36e60.png)

## Link to Application

https://spwisner.github.io/save-snippet/

## Link to Back-End Heroku Site

https://save-snippet-api.herokuapp.com

## Link to Front End Repository

https://github.com/spwisner/save-snippet

## Structure

Dependencies are stored in [`package.json`](package.json).

Please note: Do not configure `grunt` packages directly in the [`Gruntfile.js`](Gruntfile.js). Instead, store configurations in the [`grunt`](grunt) directory. You won't need a top-level key, since that's generated by the `Gruntfile.js` based on the filename of the configuration object stored in the `grunt` directory.

JavaScript files are stored in [`app/controllers`](app/controllers) and [`app/models`](app/models). Routes are stored in [`config/routes.js`](config/routes.js)

## Tasks

-   `grunt nag` or just `grunt`: runs code quality analysis tools on your code and complains
-   `grunt reformat`: reformats all your code in a standard style
-   `grunt test`: runs any automated tests

### Snippet

| Verb   | URI Pattern            | Controller#Action   |
|--------|------------------------|---------------------|
| GET    |  `/show/:id`           | `snippets#index` |
| GET    |  `/index`              | `snippets#index` |
| POST   | `/create`              | `snippets#create`|
| PATCH  | `/update/:id`          | `snippets#update`|
| DELETE | `/delete/:id`          | `snippets#delete`|

### GET /show/:id

Request:

```sh
API="http://localhost:4741"
URL_PATH="/snippets"

curl "${API}${URL_PATH}/${ID}" \
  --include \
  --request GET


echo
```

```sh
scripts/snippet-show.sh
```

### GET /index

Request:

```sh
API="http://localhost:4741"
URL_PATH="/snippets"

curl "${API}${URL_PATH}" \
  --include \
  --request GET

echo

```

```sh
scripts/snippet-index.sh
```


### POST /create

Request:

```sh
API="http://localhost:4741"
URL_PATH="/snippets"

curl "${API}${URL_PATH}" \
  --include \
  --request POST \
  --header "Content-Type: application/json" \
  --header "Authorization: Token token=${TOKEN}" \
  --data '{
    "snippet": {
      "title": "'"${TITLE}"'",
      "library": "'"${LIBRARY}"'",
      "description": "'"${DESCRIPTION}"'",
      "code": "'"${CODE}"'",
      "notes": "'"${NOTES}"'"
    }
  }'

echo
```

```sh
scripts/snippet-create.sh
```

### PATCH /update/:id

Request:

```sh
API="http://localhost:4741"
URL_PATH="/snippets"

curl "${API}${URL_PATH}/${ID}" \
  --include \
  --request PATCH \
  --header "Content-Type: application/json" \
  --header "Authorization: Token token=${TOKEN}" \
  --data '{
    "snippet": {
      "title": "'"${TITLE}"'",
      "library": "'"${LIBRARY}"'",
      "description": "'"${DESCRIPTION}"'",
      "code": "'"${CODE}"'",
      "notes": "'"${NOTES}"'"
    }
  }'

echo

```

```sh
scripts/snippet-update.sh
```

### DELETE /delete/:id

Request:

```sh
API="http://localhost:4741"
URL_PATH="/snippets"

curl "${API}${URL_PATH}/${ID}" \
  --include \
  --request DELETE \
  --header "Authorization: Token token=${TOKEN}"

echo

```

```sh
scripts/snippet-destroy.sh
```

### Authentication

| Verb   | URI Pattern            | Controller#Action |
|--------|------------------------|-------------------|
| POST   | `/sign-up`             | `users#signup`    |
| POST   | `/sign-in`             | `users#signin`    |
| PATCH  | `/change-password/:id` | `users#changepw`  |
| DELETE | `/sign-out/:id`        | `users#signout`   |

#### POST /sign-up

Request:

```sh
curl --include --request POST http://localhost:4741/sign-up \
  --header "Content-Type: application/json" \
  --data '{
    "credentials": {
      "email": "an@example.email",
      "password": "an example password",
      "password_confirmation": "an example password"
    }
  }'
```

```sh
scripts/sign-up.sh
```

Response:

```md
HTTP/1.1 201 Created
Content-Type: application/json; charset=utf-8

{
  "user": {
    "id": 1,
    "email": "an@example.email"
  }
}
```

#### POST /sign-in

Request:

```sh
curl --include --request POST http://localhost:4741/sign-in \
  --header "Content-Type: application/json" \
  --data '{
    "credentials": {
      "email": "an@example.email",
      "password": "an example password"
    }
  }'
```

```sh
scripts/sign-in.sh
```

Response:

```md
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{
  "user": {
    "id": 1,
    "email": "an@example.email",
    "token": "33ad6372f795694b333ec5f329ebeaaa"
  }
}
```

#### PATCH /change-password/:id

Request:

```sh
curl --include --request PATCH http://localhost:4741/change-password/$ID \
  --header "Authorization: Token token=$TOKEN" \
  --header "Content-Type: application/json" \
  --data '{
    "passwords": {
      "old": "examplepw",
      "new": "newpw"
    }
  }'
```

```sh
ID=1 TOKEN=33ad6372f795694b333ec5f329ebeaaa scripts/change-password.sh
```

Response:

```md
HTTP/1.1 204 No Content
```

#### DELETE /sign-out/:id

Request:

```sh
curl --include --request DELETE http://localhost:4741/sign-out/$ID \
  --header "Authorization: Token token=$TOKEN"
```

```sh
ID=1 TOKEN=33ad6372f795694b333ec5f329ebeaaa scripts/sign-out.sh
```

Response:

```md
HTTP/1.1 204 No Content
```

### Users

| Verb | URI Pattern | Controller#Action |
|------|-------------|-------------------|
| GET  | `/users`    | `users#index`     |
| GET  | `/users/1`  | `users#show`      |

#### GET /users

Request:

```sh
curl --include --request GET http://localhost:4741/users \
  --header "Authorization: Token token=$TOKEN"
```

```sh
TOKEN=33ad6372f795694b333ec5f329ebeaaa scripts/users.sh
```

Response:

```md
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{
  "users": [
    {
      "id": 2,
      "email": "another@example.email"
    },
    {
      "id": 1,
      "email": "an@example.email"
    }
  ]
}
```

#### GET /users/:id

Request:

```sh
curl --include --request GET http://localhost:4741/users/$ID \
  --header "Authorization: Token token=$TOKEN"
```

```sh
ID=2 TOKEN=33ad6372f795694b333ec5f329ebeaaa scripts/user.sh
```

Response:

```md
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8

{
  "user": {
    "id": 2,
    "email": "another@example.email"
  }
}
```
